<div id='tree-wrapper' class='tree-wrapper'>
  <svg id='christmas-tree' viewBox='0 0 400 500' xmlns='http://www.w3.org/2000/svg'>
    <rect x='180' y='400' width='40' height='60' fill='#5D4037' rx='5'></rect>

    <path d='M50 420 L200 250 L350 420 Q200 460 50 420 Z' fill='#2E7D32' class='leaf'></path>
    <circle cx='100' cy='400' r='10' fill='#FF5252' class='ornament'></circle>
    <circle cx='300' cy='380' r='10' fill='#FFD740' class='ornament'></circle>
    <circle cx='200' cy='380' r='12' fill='#E040FB' class='ornament'></circle>

    <path d='M80 300 L200 150 L320 300 Q200 340 80 300 Z' fill='#43A047' class='leaf'></path>
    <circle cx='120' cy='280' r='10' fill='#40C4FF' class='ornament'></circle>
    <circle cx='280' cy='260' r='10' fill='#FF5252' class='ornament'></circle>

    <path d='M110 180 L200 60 L290 180 Q200 220 110 180 Z' fill='#66BB6A' class='leaf'></path>
    <circle cx='180' cy='160' r='8' fill='#FFD740' class='ornament'></circle>
    <circle cx='230' cy='140' r='8' fill='#E040FB' class='ornament'></circle>

    <path
      d='M200 20 L215 55 L255 55 L225 80 L235 115 L200 95 L165 115 L175 80 L145 55 L185 55 Z'
      fill='#FFD700'
      class='star'></path>
  </svg>
</div>

<style>
  .tree-wrapper {
    position: relative;
    width: 450px;
    height: 600px;
    margin: 0 auto;
    cursor: pointer;
    user-select: none;
    transition: transform 0.1s;
  }

  /* ç‚¹å‡»æ—¶çš„æŒ‰å‹æ•ˆæœ */
  .tree-wrapper:active {
    transform: scale(0.95);
  }

  /* æ˜Ÿæ˜Ÿæ—‹è½¬åŠ¨ç”» */
  .star {
    transform-origin: 200px 70px;
    animation: spin 12s linear infinite;
    filter: drop-shadow(0 0 15px rgba(255, 215, 0, 0.8));
  }

  /* è£…é¥°çƒé—ªçƒ */
  .ornament {
    animation: twinkle 2s infinite alternate;
  }
  .ornament:nth-child(2n) {
    animation-delay: 1s;
  }

  /* æ ‘å¶çš„è½»å¾®æµ®åŠ¨ */
  .leaf {
    filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.2));
  }

  @keyframes spin {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }

  @keyframes twinkle {
    0% {
      filter: brightness(1);
    }
    100% {
      filter: brightness(1.5) drop-shadow(0 0 5px white);
    }
  }
</style>

<script>
  // è¿™é‡Œçš„é€»è¾‘åªåœ¨å®¢æˆ·ç«¯è¿è¡Œ
  const wrapper = document.getElementById('tree-wrapper')

  // åœ£è¯è±ªå Emoji å¥—é¤
  const emojis = [
    'ğŸ„',
    'ğŸ…',
    'ğŸ',
    'ğŸ¦Œ',
    'â„ï¸',
    'ğŸ””',
    'ğŸª',
    'ğŸ•¯ï¸',
    'â›„',
    'ğŸ¬',
    'Nkns',
    'åœ£è¯å¿«ä¹',
    'Merry',
    'Christmas'
  ]

  if (wrapper) {
    wrapper.addEventListener('click', (e) => {
      // è·å–ç‚¹å‡»åæ ‡ï¼Œæˆ–è€…ç›´æ¥ä»æ ‘ä¸­å¿ƒå–·å°„
      const rect = wrapper.getBoundingClientRect()
      const centerX = e.clientX - rect.left
      const centerY = e.clientY - rect.top

      // ä¸€æ¬¡çˆ† 20 ä¸ª
      for (let i = 0; i < 10; i++) {
        createParticle(centerX, centerY)
      }
    })
  }

  function createParticle(x: number, y: number) {
    const particle = document.createElement('div')
    const wrapper = document.getElementById('tree-wrapper')
    if (!wrapper) return

    // éšæœºé€‰ä¸€ä¸ª Emoji
    particle.innerText = emojis[Math.floor(Math.random() * emojis.length)]

    // åˆå§‹æ ·å¼
    Object.assign(particle.style, {
      position: 'absolute',
      left: `${x}px`,
      top: `${y}px`,
      fontSize: `${1.5 + 1}rem`, // å¤§å°éšæœº
      pointerEvents: 'none', // ä¸é˜»æŒ¡ç‚¹å‡»
      userSelect: 'none',
      zIndex: '100'
    })

    wrapper.appendChild(particle)

    // ç‰©ç†å‚æ•°
    // è§’åº¦ï¼šéšæœºå‘å››é¢å…«æ–¹ï¼Œåå‘ä¸Šæ–¹ä¸€ç‚¹ (-90åº¦å·¦å³)
    const angle = Math.random() * Math.PI * 2
    // é€Ÿåº¦
    const velocity = Math.random() * 2 + 1
    let vx = Math.cos(angle) * velocity
    let vy = Math.sin(angle) * velocity - 2 // åˆå§‹å‘ä¸Šå†²åŠ›
    let gravity = 0.3 // é‡åŠ›
    let opacity = 1

    // åŠ¨ç”»å¾ªç¯
    function animate() {
      // åº”ç”¨ç‰©ç†
      vy += gravity
      const currentLeft = parseFloat(particle.style.left)
      const currentTop = parseFloat(particle.style.top)

      particle.style.left = `${currentLeft + vx}px`
      particle.style.top = `${currentTop + vy}px`

      // æ…¢æ…¢æ¶ˆå¤±
      opacity -= 0.004
      particle.style.opacity = opacity.toString()

      // ç¨å¾®è½¬ä¸€ä¸‹
      particle.style.transform = `rotate(${vy * 5}deg)`

      if (opacity > 0 && currentTop < 600) {
        // æ²¡å®Œå…¨æ¶ˆå¤±ä¸”æ²¡æ‰å‡ºç•Œ
        requestAnimationFrame(animate)
      } else {
        particle.remove() // åƒåœ¾å›æ”¶
      }
    }

    requestAnimationFrame(animate)
  }
</script>
